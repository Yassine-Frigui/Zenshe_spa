-- ================================================================
-- COMPREHENSIVE ARABIC TRANSLATIONS FIX
-- This script fixes ALL corrupted Arabic translations (services 1-54)
-- ================================================================

SET NAMES utf8mb4;
SET CHARACTER_SET_CLIENT = utf8mb4;
SET CHARACTER_SET_CONNECTION = utf8mb4;
SET CHARACTER_SET_RESULTS = utf8mb4;
SET COLLATION_CONNECTION = utf8mb4_unicode_ci;

USE zenshespa_database;

-- ================================================================
-- STEP 1: Delete all corrupted Arabic translations
-- ================================================================

DELETE FROM services_translations WHERE language_code = 'ar';

-- ================================================================
-- STEP 2: Re-insert all Arabic translations with proper UTF-8
-- ================================================================

-- Services 1-13 (V-Steam, Vajacials, Packages)
INSERT INTO services_translations (id, service_id, language_code, nom, description, description_detaillee, inclus, contre_indications, conseils_apres_soin, date_creation, date_modification) VALUES
(29, 1, 'ar', 'بخار الاسترخاء', 'حمام بخار مريح بالأعشاب لمدة 10 دقائق', NULL, 'استشارة قبل وبعد الجلسة، مشروب مجاني', NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(30, 2, 'ar', 'البخار المتخصص (10 دقائق)', 'حمام بخار متخصص بالأعشاب العلاجية', NULL, 'استشارة قبل وبعد الجلسة، مشروب مجاني', NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(31, 3, 'ar', 'البخار المتخصص (30 دقيقة)', 'حمام بخار متخصص ممتد للاسترخاء العميق', NULL, 'استشارة قبل وبعد الجلسة، مشروب مجاني', NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(32, 4, 'ar', 'طقوس ما قبل إزالة الشعر', 'تحضير مثالي للبشرة قبل إزالة الشعر', NULL, 'استشارة صحية لمدة 5 دقائق', NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(33, 5, 'ar', 'طقوس مهدئة بعد إزالة الشعر', 'عناية مهدئة بعد إزالة الشعر', NULL, 'استشارة صحية لمدة 5 دقائق', NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(34, 6, 'ar', 'Vajacial الترميمي', 'علاج ترميم حميم كامل', NULL, 'استشارة صحية لمدة 5 دقائق', NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(35, 7, 'ar', 'إضافة الشفاء', 'شاي أعشاب مخصص ونصائح نمط الحياة', NULL, 'شاي أعشاب مخصص، نصائح نمط الحياة', NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(36, 8, 'ar', 'مع إزالة الشعر', 'Vajacial ترميمي مع خدمة إزالة الشعر المدرجة', NULL, NULL, NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(37, 9, 'ar', 'بدون إزالة الشعر', 'Vajacial ترميمي بدون إزالة الشعر', NULL, NULL, NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(38, 10, 'ar', 'باقة 5 جلسات - بخار الاسترخاء', 'باقة 5 جلسات', NULL, NULL, NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(39, 11, 'ar', 'باقة 10 جلسات - بخار الاسترخاء', 'باقة 10 جلسات', NULL, NULL, NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(40, 12, 'ar', 'باقة 5 جلسات - البخار المتخصص 10 دقائق', 'باقة 5 جلسات', NULL, NULL, NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48'),
(41, 13, 'ar', 'باقة 10 جلسات - البخار المتخصص 10 دقائق', 'باقة 10 جلسات', NULL, NULL, NULL, NULL, '2025-08-04 13:16:48', '2025-08-04 13:16:48');

-- Services 14-22 (Massages, Spa, Waxing)
INSERT INTO services_translations (service_id, language_code, nom, description, description_detaillee, inclus, contre_indications, conseils_apres_soin, date_creation, date_modification) VALUES
(14, 'ar', 'تدليك القدمين والظهر (10 دقائق)', 'تدليك مريح للقدمين والظهر باستخدام أجهزة متخصصة', 'تدليك مستهدف لمدة 10 دقائق لإرخاء القدمين والظهر باستخدام معدات احترافية', NULL, 'غير موصى به في حالة الإصابات الحديثة أو الالتهابات', 'شرب الكثير من الماء بعد التدليك', NOW(), NOW()),
(15, 'ar', 'تدليك القدمين والظهر (20 دقيقة)', 'تدليك مريح ممتد للقدمين والظهر', 'تدليك عميق لمدة 20 دقيقة للاسترخاء الأمثل للقدمين والظهر', NULL, 'غير موصى به في حالة الإصابات الحديثة أو الالتهابات', 'شرب الكثير من الماء والراحة بعد التدليك', NOW(), NOW()),
(16, 'ar', 'تدليك القدمين والظهر (30 دقيقة)', 'تدليك كامل للقدمين والظهر', 'جلسة كاملة لمدة 30 دقيقة للاسترخاء العميق والدائم', NULL, 'غير موصى به في حالة الإصابات الحديثة أو الالتهابات', 'شرب الكثير من الماء وتجنب الأنشطة المكثفة', NOW(), NOW()),
(17, 'ar', 'تدليك العيون (10 دقائق)', 'تدليك لطيف ومريح لمحيط العين', 'علاج متخصص لمدة 10 دقائق لتقليل إجهاد العين والتوتر', NULL, 'غير موصى به في حالة عدوى العين أو الجراحة الحديثة', 'تجنب فرك العينين بعد التدليك', NOW(), NOW()),
(18, 'ar', 'تدليك العيون (15 دقيقة)', 'تدليك ممتد لمحيط العين', 'علاج عميق لمدة 15 دقيقة للاسترخاء الأقصى لمحيط العين', NULL, 'غير موصى به في حالة عدوى العين أو الجراحة الحديثة', 'تجنب فرك العينين وضع كمادات باردة إذا لزم الأمر', NOW(), NOW()),
(19, 'ar', 'طقس الاكتشاف (45 دقيقة)', 'تنقية نباتية لفروة الرأس بمنتجات لا بيوستيتيك', 'طقس اكتشاف لمدة 45 دقيقة يشمل تحليل فروة الرأس والتنظيف العميق والتدليك المريح والعلاج الشخصي', 'تحليل فروة الرأس، منتجات لا بيوستيتيك الفاخرة، شاي مجاني', 'غير موصى به في حالة وجود جروح أو تهيج في فروة الرأس', 'عدم غسل الشعر لمدة 24 ساعة لتحقيق أقصى فائدة', NOW(), NOW()),
(20, 'ar', 'الطقس الكلاسيكي (60 دقيقة)', 'علاج كامل لفروة الرأس مع تدليك مريح ممتد', 'طقس كلاسيكي لمدة 60 دقيقة يقدم تجربة سبا شعر كاملة مع تدليك ممتد للكتفين والرقبة', 'تحليل فروة الرأس، تدليك ممتد، منتجات لا بيوستيتيك الفاخرة، شاي ووجبة خفيفة', 'غير موصى به في حالة وجود جروح أو تهيج في فروة الرأس', 'عدم غسل الشعر لمدة 24-48 ساعة، تجنب منتجات التصفيف', NOW(), NOW()),
(21, 'ar', 'الطقس الفاخر (90 دقيقة)', 'تجربة سبا شعر نهائية مع جميع العلاجات الفاخرة', 'طقس فاخر لمدة 90 دقيقة يشمل جميع العلاجات الفاخرة، تدليك كامل للرأس والكتفين والرقبة، ورعاية مكثفة', 'تحليل متعمق، تدليك كامل، قناع فاخر، منتجات لا بيوستيتيك، شاي ووجبة خفيفة فاخرة', 'غير موصى به في حالة وجود جروح أو تهيج في فروة الرأس', 'عدم غسل الشعر لمدة 48 ساعة، استخدام المنتجات الموصى بها فقط', NOW(), NOW()),
(22, 'ar', 'إزالة الشعر البرازيلية', 'خدمة إزالة الشعر البرازيلية الكاملة', 'خدمة إزالة الشعر البرازيلية الاحترافية باستخدام شمع عالي الجودة للحصول على بشرة ناعمة وحريرية', 'تحضير البشرة، شمع فاخر، علاج مهدئ بعد إزالة الشعر', 'غير موصى به أثناء الحمل، على البشرة المتهيجة أو المحروقة من الشمس', 'تجنب التعرض للشمس والحمامات الساخنة والملابس الضيقة لمدة 24 ساعة', NOW(), NOW());

-- Services 23-32 (Rituels ZenShe)
INSERT INTO services_translations (service_id, language_code, nom, description, date_creation, date_modification) VALUES
(23, 'ar', 'تجديد البخار والعيون', '10 دقائق بخار استرخاء + 10 دقائق تدليك العين + شاي مجاني', NOW(), NOW()),
(24, 'ar', 'خلوة القدمين', '10 دقائق بخار استرخاء + 10 دقائق تدليك القدمين (آلة) + شاي', NOW(), NOW()),
(25, 'ar', 'ثنائي التوهج السريع', '10 دقائق بخار استرخاء + 10 دقائق تدليك الوجه + شاي', NOW(), NOW()),
(26, 'ar', 'إعادة ضبط الاسترخاء الكامل', '10 دقائق بخار + 10 دقائق تدليك العين + 10 دقائق تدليك القدمين + شاي', NOW(), NOW()),
(27, 'ar', 'طقوس البخار والعلاج بالروائح', '10 دقائق بخار + 15 دقيقة تدليك الرأس بالروائح (زيت عطري) + شاي', NOW(), NOW()),
(28, 'ar', 'طقوس البخار وعلم المنعكسات', '10 دقائق بخار استرخاء + 20 دقيقة علم انعكاسات القدم + شاي', NOW(), NOW()),
(29, 'ar', 'طقوس الرحم والعقل', '30 دقيقة بخار استرخاء + 45 دقيقة سبا الرأس الياباني (طقوس الاكتشاف) + شاي', NOW(), NOW()),
(30, 'ar', 'الهدوء لشخصين', 'لكل: 30 دقيقة بخار استرخاء + 10 دقائق اختيار تدليك العين أو القدم + شاي (120 دينار للشخص)', NOW(), NOW()),
(31, 'ar', 'خيار موانع الاستعمال', '10 دقائق بخار + 10 دقائق تدليك العين + شاي (عند موانع البخار المطول)', NOW(), NOW()),
(32, 'ar', 'طقوس زين ماما للحمل', '30 دقيقة بدون بخار: تدليك الرأس بنقاط الضغط + تدليك القدمين + تدليك العين + شاي', NOW(), NOW());

-- Services 53-54 (Massage Packages)
INSERT INTO services_translations (service_id, language_code, nom, description, inclus, date_creation, date_modification) VALUES
(53, 'ar', 'باقة التدليك الكاملة', 'تدليك كامل للقدمين والظهر والعيون (30 دقيقة قدمين+ظهر + 15 دقيقة عيون)', 'زيوت عطرية، مناشف ساخنة', NOW(), NOW()),
(54, 'ar', 'تدليك القدمين فقط - 10 دقائق', 'تدليك انعكاسات القدمين فقط', 'زيوت عطرية', NOW(), NOW());

-- ================================================================
-- STEP 3: Verify the fix
-- ================================================================

SELECT '✅ All Arabic translations fixed successfully!' as status;

-- Count Arabic translations per service
SELECT 
    'Total Arabic translations' as metric,
    COUNT(*) as count
FROM services_translations 
WHERE language_code = 'ar';

-- Show sample of fixed translations
SELECT 
    service_id,
    LEFT(nom, 50) as service_name,
    LEFT(description, 80) as description_preview
FROM services_translations 
WHERE language_code = 'ar'
ORDER BY service_id
LIMIT 10;

-- Show services without Arabic translations
SELECT 
    s.id,
    st_fr.nom as french_name
FROM services s
LEFT JOIN services_translations st_fr ON s.id = st_fr.service_id AND st_fr.language_code = 'fr'
LEFT JOIN services_translations st_ar ON s.id = st_ar.service_id AND st_ar.language_code = 'ar'
WHERE st_ar.id IS NULL
ORDER BY s.id;
