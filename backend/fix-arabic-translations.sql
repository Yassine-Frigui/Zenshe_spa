-- ============================================================================
-- Fix Arabic Service Translations Encoding
-- ============================================================================
-- This script re-inserts Arabic translations with proper UTF-8 encoding
-- ============================================================================

SET NAMES utf8mb4;
SET CHARACTER_SET_CLIENT = utf8mb4;
SET CHARACTER_SET_CONNECTION = utf8mb4;
SET CHARACTER_SET_RESULTS = utf8mb4;

USE zenshespa_database;

-- Delete existing corrupted Arabic translations
DELETE FROM services_translations WHERE language_code = 'ar';

-- Re-insert Arabic translations for Massages
INSERT INTO services_translations (
    service_id, language_code, nom, description, description_detaillee, 
    inclus, contre_indications, conseils_apres_soin
) VALUES 
-- Massage 10min (assuming service_id based on French name match)
(14, 'ar', 
    'تدليك القدمين والظهر (10 دقائق)',
    'تدليك مريح للقدمين والظهر بآلات متخصصة',
    'تدليك مستهدف لمدة 10 دقائق لإرخاء القدمين والظهر باستخدام معدات احترافية',
    NULL,
    'غير موصى به في حالة الإصابات الحديثة أو الالتهابات',
    'شرب الكثير من الماء بعد التدليك'
),
-- Massage 20min
(15, 'ar',
    'تدليك القدمين والظهر (20 دقيقة)',
    'تدليك مريح ممتد للقدمين والظهر',
    'تدليك عميق لمدة 20 دقيقة للاسترخاء الأمثل للقدمين والظهر',
    NULL,
    'غير موصى به في حالة الإصابات الحديثة أو الالتهابات',
    'شرب الكثير من الماء وتجنب الأنشطة المكثفة'
),
-- Massage 30min
(16, 'ar',
    'تدليك القدمين والظهر (30 دقيقة)',
    'تدليك كامل للقدمين والظهر',
    'جلسة كاملة لمدة 30 دقيقة للاسترخاء العميق والدائم',
    NULL,
    'غير موصى به في حالة الإصابات الحديثة أو الالتهابات',
    'شرب الكثير من الماء وتجنب الأنشطة المكثفة'
),
-- Eye Massage 10min
(17, 'ar',
    'تدليك العيون (10 دقائق)',
    'تدليك لطيف ومريح لمحيط العين',
    'علاج متخصص لمدة 10 دقائق لتقليل إجهاد العين والتوتر',
    NULL,
    'غير موصى به في حالة عدوى العين أو الجراحة الحديثة',
    'تجنب فرك العينين بعد التدليك'
),
-- Eye Massage 15min
(18, 'ar',
    'تدليك العيون (15 دقيقة)',
    'تدليك ممتد لمحيط العين',
    'علاج عميق لمدة 15 دقيقة للاسترخاء الأقصى لمحيط العين',
    NULL,
    'غير موصى به في حالة عدوى العين أو الجراحة الحديثة',
    'تجنب فرك العينين وضع كمادات باردة إذا لزم الأمر'
),
-- Japanese Head Spa 45min
(19, 'ar',
    'طقس الاكتشاف (45 دقيقة)',
    'تنقية نباتية لفروة الرأس بمنتجات لا بيوستيتيك',
    'طقس اكتشاف لمدة 45 دقيقة يشمل تحليل فروة الرأس والتنظيف العميق والتدليك المريح والعلاج الشخصي',
    'تحليل فروة الرأس، منتجات لا بيوستيتيك الفاخرة، شاي مجاني',
    'غير موصى به في حالة وجود جروح أو تهيج في فروة الرأس',
    'عدم غسل الشعر لمدة 24 ساعة لتحقيق أقصى فائدة'
),
-- Japanese Head Spa 60min
(20, 'ar',
    'الطقس الكلاسيكي (60 دقيقة)',
    'علاج كامل لفروة الرأس مع تدليك مريح ممتد',
    'طقس كلاسيكي لمدة 60 دقيقة يقدم تجربة سبا شعر كاملة مع تدليك ممتد للكتفين والرقبة',
    'تحليل فروة الرأس، تدليك ممتد، منتجات لا بيوستيتيك الفاخرة، شاي ووجبة خفيفة',
    'غير موصى به في حالة وجود جروح أو تهيج في فروة الرأس',
    'عدم غسل الشعر لمدة 24-48 ساعة، تجنب منتجات التصفيف'
),
-- Japanese Head Spa 90min
(21, 'ar',
    'الطقس الفاخر (90 دقيقة)',
    'تجربة سبا شعر نهائية مع جميع العلاجات الفاخرة',
    'طقس فاخر لمدة 90 دقيقة يشمل جميع العلاجات الفاخرة، تدليك كامل للرأس والكتفين والرقبة، ورعاية مكثفة',
    'تحليل متعمق، تدليك كامل، قناع فاخر، منتجات لا بيوستيتيك، شاي ووجبة خفيفة فاخرة',
    'غير موصى به في حالة وجود جروح أو تهيج في فروة الرأس',
    'عدم غسل الشعر لمدة 48 ساعة، استخدام المنتجات الموصى بها فقط'
),
-- Brazilian Wax
(22, 'ar',
    'إزالة الشعر البرازيلية',
    'خدمة إزالة الشعر البرازيلية الكاملة',
    'خدمة إزالة الشعر البرازيلية الاحترافية باستخدام شمع عالي الجودة للحصول على بشرة ناعمة وحريرية',
    'تحضير البشرة، شمع فاخر، علاج مهدئ بعد إزالة الشعر',
    'غير موصى به أثناء الحمل، على البشرة المتهيجة أو المحروقة من الشمس',
    'تجنب التعرض للشمس والحمامات الساخنة والملابس الضيقة لمدة 24 ساعة'
);

-- Verification query
SELECT 
    s.id,
    s.nom as french_name,
    st_ar.nom as arabic_name,
    LENGTH(st_ar.nom) as byte_length,
    CHAR_LENGTH(st_ar.nom) as char_length,
    st_ar.language_code
FROM services s
LEFT JOIN services_translations st_ar ON s.id = st_ar.service_id AND st_ar.language_code = 'ar'
WHERE s.id >= 14 AND s.id <= 22
ORDER BY s.id;
