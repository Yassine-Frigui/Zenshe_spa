# ğŸ“Š ZENSHE SPA TESTING ARCHITECTURE

## ğŸ¯ Complete Testing Strategy Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ZENSHE SPA APPLICATION                        â”‚
â”‚                                                                  â”‚
â”‚  Frontend (React)          Backend (Node.js)         Database   â”‚
â”‚  Port 3000                 Port 5000                 MySQL 4306  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TESTING LAYERS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 1: UNIT TESTS (Fast, Isolated, Mocked)                    â”‚
â”‚ âœ… Current: 19 tests | ğŸ¯ Goal: ~150 tests                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Backend Unit Tests               Frontend Unit Tests           â”‚
â”‚  â”œâ”€ Models (8)                    â”œâ”€ Components (40)            â”‚
â”‚  â”‚  â”œâ”€ Product.test.js âœ…         â”‚  â”œâ”€ ProductCard.test.jsx    â”‚
â”‚  â”‚  â”œâ”€ StoreOrder.test.js âœ…      â”‚  â”œâ”€ CartSummary.test.jsx    â”‚
â”‚  â”‚  â”œâ”€ Client.test.js             â”‚  â”œâ”€ BookingForm.test.jsx    â”‚
â”‚  â”‚  â”œâ”€ Service.test.js            â”‚  â””â”€ ... (37 more)           â”‚
â”‚  â”‚  â”œâ”€ Reservation.test.js        â”‚                             â”‚
â”‚  â”‚  â”œâ”€ Membership.test.js         â”œâ”€ Services (5)               â”‚
â”‚  â”‚  â”œâ”€ ReferralCode.test.js       â”‚  â”œâ”€ api.test.js             â”‚
â”‚  â”‚  â””â”€ ProductCategory.test.js    â”‚  â”œâ”€ auth.test.js            â”‚
â”‚  â”‚                                 â”‚  â””â”€ store.test.js           â”‚
â”‚  â”œâ”€ Services (2)                  â”‚                             â”‚
â”‚  â”‚  â”œâ”€ EmailService.test.js       â”œâ”€ Context (3)                â”‚
â”‚  â”‚  â””â”€ ReferralService.test.js    â”‚  â”œâ”€ CartContext.test.jsx    â”‚
â”‚  â”‚                                 â”‚  â”œâ”€ AuthContext.test.jsx    â”‚
â”‚  â””â”€ Middleware (2)                â”‚  â””â”€ AdminContext.test.jsx   â”‚
â”‚     â”œâ”€ auth.test.js                â”‚                             â”‚
â”‚     â””â”€ security.test.js            â”‚                             â”‚
â”‚                                                                  â”‚
â”‚  Uses: Jest + Mocks                Uses: Vitest + RTL           â”‚
â”‚  Speed: < 1 second                 Speed: ~2-3 seconds          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 2: INTEGRATION TESTS (Medium Speed, Real DB)              â”‚
â”‚ âœ… Current: 0 tests | ğŸ¯ Goal: ~55 tests                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Backend API Tests                Frontend Flow Tests           â”‚
â”‚  â”œâ”€ auth-api.test.js              â”œâ”€ booking-flow.test.jsx      â”‚
â”‚  â”‚  â”œâ”€ POST /api/auth/login       â”‚  â””â”€ Service â†’ Date â†’ Form   â”‚
â”‚  â”‚  â”œâ”€ POST /api/auth/register    â”‚                             â”‚
â”‚  â”‚  â””â”€ GET /api/auth/verify       â”œâ”€ checkout-flow.test.jsx     â”‚
â”‚  â”‚                                 â”‚  â””â”€ Cart â†’ Checkout â†’ Pay   â”‚
â”‚  â”œâ”€ store-api.test.js              â”‚                             â”‚
â”‚  â”‚  â”œâ”€ GET /api/store/products    â”œâ”€ admin-store.test.jsx       â”‚
â”‚  â”‚  â”œâ”€ GET /api/store/product/:id â”‚  â””â”€ Add/Edit/Delete Product â”‚
â”‚  â”‚  â””â”€ GET /api/store/categories  â”‚                             â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ reservations-api.test.js                                    â”‚
â”‚  â”‚  â”œâ”€ POST /api/reservations                                   â”‚
â”‚  â”‚  â”œâ”€ GET /api/reservations/:id                                â”‚
â”‚  â”‚  â””â”€ PATCH /api/reservations/:id                              â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ admin-api.test.js (~10 routes)                              â”‚
â”‚  â”œâ”€ services-api.test.js (~5 routes)                            â”‚
â”‚  â”œâ”€ memberships-api.test.js (~4 routes)                         â”‚
â”‚  â”œâ”€ referral-api.test.js (~3 routes)                            â”‚
â”‚  â”œâ”€ jotform-api.test.js (~2 routes)                             â”‚
â”‚  â””â”€ upload-api.test.js (~2 routes)                              â”‚
â”‚                                                                  â”‚
â”‚  Uses: Jest + Supertest + Real DB                               â”‚
â”‚  Speed: ~10-15 seconds                                          â”‚
â”‚  Database: zenshespa_database_test                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 3: END-TO-END TESTS (Slow, Full Stack, Real Browser)      â”‚
â”‚ âœ… Current: 0 tests | ğŸ¯ Goal: ~20 tests                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Critical User Journeys                                         â”‚
â”‚  â”œâ”€ booking.spec.js                                             â”‚
â”‚  â”‚  1. Visit homepage                                           â”‚
â”‚  â”‚  2. Click "Book Service"                                     â”‚
â”‚  â”‚  3. Select massage type                                      â”‚
â”‚  â”‚  4. Choose date/time                                         â”‚
â”‚  â”‚  5. Fill booking form                                        â”‚
â”‚  â”‚  6. Submit booking                                           â”‚
â”‚  â”‚  7. Verify confirmation page                                 â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ checkout.spec.js                                            â”‚
â”‚  â”‚  1. Browse products                                          â”‚
â”‚  â”‚  2. Add to cart                                              â”‚
â”‚  â”‚  3. View cart                                                â”‚
â”‚  â”‚  4. Proceed to checkout                                      â”‚
â”‚  â”‚  5. Fill shipping info                                       â”‚
â”‚  â”‚  6. Complete order                                           â”‚
â”‚  â”‚  7. Verify confirmation                                      â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ authentication.spec.js                                      â”‚
â”‚  â”‚  â”œâ”€ Register new user                                        â”‚
â”‚  â”‚  â”œâ”€ Login with credentials                                   â”‚
â”‚  â”‚  â”œâ”€ Access protected routes                                  â”‚
â”‚  â”‚  â””â”€ Logout                                                   â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ admin-product-management.spec.js                            â”‚
â”‚  â”‚  â”œâ”€ Admin login                                              â”‚
â”‚  â”‚  â”œâ”€ Create new product                                       â”‚
â”‚  â”‚  â”œâ”€ Edit product details                                     â”‚
â”‚  â”‚  â”œâ”€ Upload product image                                     â”‚
â”‚  â”‚  â””â”€ Delete product                                           â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€ ... (16 more E2E scenarios)                                 â”‚
â”‚                                                                  â”‚
â”‚  Uses: Playwright + Chromium                                    â”‚
â”‚  Speed: ~30-60 seconds                                          â”‚
â”‚  Database: zenshespa_database_test                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TEST INFRASTRUCTURE                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Database Layer:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ zenshespa_database (Production)      â”‚ â† Real data, port 4306
â”‚ zenshespa_database_test (Testing)    â”‚ â† Test data, port 4306
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†‘
                  â”‚ Seed before each test suite
                  â”‚ Clean after each test
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Test Helpers                          â”‚
â”‚ â”œâ”€ db-helper.js                      â”‚
â”‚ â”‚  â”œâ”€ setupTestDatabase()            â”‚
â”‚ â”‚  â”œâ”€ cleanDatabase()                â”‚
â”‚ â”‚  â””â”€ seedTestDatabase()             â”‚
â”‚ â”‚                                    â”‚
â”‚ â”œâ”€ setup.js                          â”‚
â”‚ â”‚  â”œâ”€ Environment variables          â”‚
â”‚ â”‚  â”œâ”€ Mock console methods           â”‚
â”‚ â”‚  â””â”€ Global test timeout            â”‚
â”‚ â”‚                                    â”‚
â”‚ â””â”€ fixtures/sample-data.js           â”‚
â”‚    â”œâ”€ Test products                  â”‚
â”‚    â”œâ”€ Test users                     â”‚
â”‚    â””â”€ Test orders                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Configuration Files:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ backend/jest.config.js               â”‚ â† Backend test config
â”‚ frontend/vite.config.js (test)       â”‚ â† Frontend test config
â”‚ playwright.config.js                 â”‚ â† E2E test config
â”‚ .env.test                            â”‚ â† Test environment vars
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
